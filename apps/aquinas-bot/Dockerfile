FROM node:20-alpine

ARG DISCORD_TOKEN
ARG DISCORD_CLIENT_ID
ARG DISCORD_GUILD_ID
ARG ASSETS_DIR

WORKDIR /app
COPY ./dist/apps/aquinas-bot .

ENV PORT=3333
EXPOSE ${PORT}

ENV DISCORD_TOKEN=${DISCORD_TOKEN}
ENV DISCORD_CLIENT_ID=${DISCORD_CLIENT_ID}
ENV DISCORD_GUILD_ID=${DISCORD_GUILD_ID}
ENV ASSETS_DIR=${ASSETS_DIR}

RUN npm install --omit=dev

CMD node main.js
